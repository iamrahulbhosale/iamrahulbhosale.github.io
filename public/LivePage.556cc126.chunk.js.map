{"version":3,"sources":["/src/client/pages/LivePage/PhotosSection/PhotosSection.styl","/src/client/pages/LivePage/PhotosSection/grid.data.js","/src/client/pages/LivePage/PhotosSection/FastGrid.styl","/src/client/pages/LivePage/LivePage.styl","/src/client/pages/LivePage/PhotosSection/compute-transforms.js","/src/client/pages/LivePage/PhotosSection/FastGrid.js","/src/client/pages/LivePage/PhotosSection/index.js","/src/client/pages/LivePage/index.js"],"names":["module","exports","container","title","src","rows","cols","compute_transforms_OFFSET_FACTOR","compute_transforms_computeTransform","el","h","Object","dom","y1","y2","factor","bounds","elcenter","top","height","pagecenter","bottom","compute_transforms_getScaleFactor","getBoundingClientRect","style","transform","item","compute_transforms_buildTransform","FastGrid_FastGridItem","FastGridItem","props","FastGrid_classCallCheck","this","_this","FastGrid_possibleConstructorReturn","__proto__","getPrototypeOf","call","componentDidMount","setTimeout","loadImage","img","document","createElement","onload","setState","loaded","loadedImage","state","image","onerror","hasError","react","cx","classnames_default","is-loaded","className","react_default","a","onTransitionEnd","alt","propTypes","prop_types_default","string","isRequired","columnCount","_this2","transitionCounter","handleResize","window","ss","addEventListener","componentWillUnmount","removeEventListener","isLayoutBusy","requestAnimationFrame","updateColumns","handleScroll","updateLayout","w","items","Array","from","querySelectorAll","forEach","console","log","getColumns","count","grid_data_default","reduce","result","index","push","fill","map","x","_this3","FastGrid_default","col","i","key","j","onTransitionStart","scalePortfolioImage","perc","dw","documentElement","clientWidth","innerWidth","dh","clientHeight","innerHeight","round_default","isScaleImageBusy","PhotosSection_default","ref","node","es","to","Logo","white","LivePage_PhotosSection_FastGrid","pages_LivePage_LivePage","scrollTo","behaviour","LivePage_default","LivePage_PhotosSection"],"mappings":"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","file":"LivePage.556cc126.chunk.js","sourcesContent":["// removed by extract-text-webpack-plugin\nmodule.exports = {\"container\":\"_2weftxxKMO_V68AtH_3VGe\"};","module.exports = [\n  { title: 'Something', src: '/public/img/grid/image-1.jpg', rows: 2, cols: 1 },\n  { title: 'Something', src: '/public/img/grid/image-2.jpg', rows: 1, cols: 1 },\n  { title: 'Something', src: '/public/img/grid/image-3.jpg', rows: 1, cols: 1 },\n  { title: 'Something', src: '/public/img/grid/image-4.jpg', rows: 1, cols: 2 },\n  { title: 'Something', src: '/public/img/grid/image-5.jpg', rows: 1, cols: 1 },\n  { title: 'Something', src: '/public/img/grid/image-6.jpg', rows: 1, cols: 1 },\n  { title: 'Something', src: '/public/img/grid/image-7.jpg', rows: 1, cols: 1 },\n  { title: 'Something', src: '/public/img/grid/image-8.jpg', rows: 2, cols: 1 },\n  { title: 'Something', src: '/public/img/grid/image-9.jpg', rows: 1, cols: 1 },\n  {\n    title: 'Something',\n    src: '/public/img/grid/image-10.jpg',\n    rows: 2,\n    cols: 1\n  },\n  {\n    title: 'Something',\n    src: '/public/img/grid/image-11.jpg',\n    rows: 2,\n    cols: 1\n  },\n  {\n    title: 'Something',\n    src: '/public/img/grid/image-12.jpg',\n    rows: 1,\n    cols: 2\n  },\n  {\n    title: 'Something',\n    src: '/public/img/grid/image-14.jpg',\n    rows: 1,\n    cols: 1\n  },\n  {\n    title: 'Something',\n    src: '/public/img/grid/image-15.jpg',\n    rows: 1,\n    cols: 2\n  },\n  {\n    title: 'Something',\n    src: '/public/img/grid/image-16.jpg',\n    rows: 1,\n    cols: 1\n  },\n  {\n    title: 'Something',\n    src: '/public/img/grid/image-17.jpg',\n    rows: 1,\n    cols: 1\n  },\n  { title: 'Something', src: '/public/img/grid/image-18.jpg', rows: 1, cols: 1 }\n]\n","// removed by extract-text-webpack-plugin\nmodule.exports = {\"container\":\"DmIa4IwGGay1dxOK3Ij15\"};","// removed by extract-text-webpack-plugin\nmodule.exports = {\"container\":\"_1PusMKMzln4u8aOvt2QT1b\"};","import { getBrowserHeight } from 'utils/dom'\n\n// how much should visible area be offset from browser height\nconst OFFSET_FACTOR = 0.01\n\nfunction getScaleFactor(bounds, y1, y2, h) {\n  var elcenter = bounds.top + bounds.height / 2\n  var pagecenter = h / 2\n  var factor\n\n  // left way above\n  if (bounds.bottom <= -0.3 * h) {\n    factor = 10\n  } else if (bounds.top >= y1 && bounds.bottom <= y2) {\n    factor = 0\n  } else if (bounds.bottom > 0 && bounds.bottom < y1) {\n    factor = (pagecenter - elcenter) / pagecenter\n  } else if (bounds.top > y2 && bounds.top < h) {\n    factor = (elcenter - pagecenter) / pagecenter\n  } else {\n    factor = 10\n  }\n  return factor\n}\n\nfunction buildTransform(item, factor) {\n  var x = 0\n  var y = factor * 40\n  var z = 0\n  // var deg = factor < 0 ? 5 : -5\n  return `translate3d(${x}px, ${y}px, ${z}px)`\n}\n\nexport default function computeTransform(el) {\n  var h = getBrowserHeight()\n  var y1 = h * OFFSET_FACTOR\n  var y2 = h * (1 - OFFSET_FACTOR)\n\n  var bounds = el.getBoundingClientRect()\n  var factor = getScaleFactor(bounds, y1, y2, h)\n\n  // if (Math.abs(factor) === 10 && el.style.visibility !== 'hidden') {\n  //   el.style.visibility = 'hidden'\n  //   return\n  // }\n\n  // if (el.style.visibility !== 'visible') {\n  //   el.style.visibility = 'visible'\n  // }\n\n  el.style.transform = buildTransform(el, factor)\n}\n","import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport classnames from 'classnames'\nimport { getBrowserWidth } from 'utils/dom'\n\nimport s from './FastGrid.styl'\n\nimport computeTransforms from './compute-transforms'\nimport LIST from './grid.data'\n\nclass FastGridItem extends Component {\n  static propTypes = {\n    image: PropTypes.string.isRequired\n  }\n  constructor(props) {\n    super(props)\n    this.state = {\n      loaded: false,\n      loadedImage: false,\n      image: props.image,\n      hasError: false\n    }\n  }\n\n  componentDidMount = () => {\n    setTimeout(() => this.loadImage(), 300)\n  }\n\n  loadImage = () => {\n    const img = document.createElement('img')\n    img.onload = () => {\n      this.setState({ loaded: true, loadedImage: this.state.image })\n    }\n    img.onerror = () => {\n      this.setState({ hasError: true })\n    }\n    img.src = this.state.image\n  }\n\n  render() {\n    const cx = classnames(\n      'fast-grid-item',\n      {\n        'is-loaded': this.state.loaded\n      },\n      this.props.className\n    )\n\n    const src = this.state.loadedImage || false\n\n    return (\n      <div className={cx} onTransitionEnd={this.props.onTransitionEnd}>\n        {!!src && <img alt=\"\" className=\"fast-grid-item-image\" src={src} />}\n      </div>\n    )\n  }\n}\n\nexport default class FastGrid extends Component {\n  state = {\n    columnCount: 3\n  }\n\n  componentDidMount = () => {\n    this.transitionCounter = 0\n    this.handleResize()\n    window.ss = this\n    // this.handleScroll()\n    // window.addEventListener('scroll', this.handleScroll)\n    window.addEventListener('resize', this.handleResize)\n  }\n  componentWillUnmount = () => {\n    // window.removeEventListener('scroll', this.handleScroll)\n    window.removeEventListener('resize', this.handleResize)\n  }\n\n  handleResize = () => {\n    if (this.isLayoutBusy) {\n      return\n    }\n    this.isLayoutBusy = true\n    window.requestAnimationFrame(this.updateColumns)\n  }\n\n  handleScroll = () => {\n    if (this.isLayoutBusy) {\n      return\n    }\n    this.isLayoutBusy = true\n    window.requestAnimationFrame(this.updateLayout)\n  }\n\n  updateColumns = () => {\n    const w = getBrowserWidth()\n    var columnCount\n    if (w < 650) {\n      columnCount = 1\n    } else if (w >= 650 && w <= 1160) {\n      columnCount = 2\n    } else {\n      columnCount = 3\n    }\n\n    if (this.state.columnCount !== columnCount) {\n      return this.setState({ columnCount }, () => {\n        this.isLayoutBusy = false\n      })\n    }\n    this.isLayoutBusy = false\n  }\n\n  updateLayout = () => {\n    const items = Array.from(document.querySelectorAll('.fast-grid-item'))\n    this.transitionCounter++\n    items.forEach(computeTransforms)\n  }\n\n  onTransitionEnd = () => {\n    this.transitionCounter--\n    if (this.transitionCounter <= 0) {\n      this.isLayoutBusy = false\n      console.log('ended last', this.isLayoutBusy)\n    }\n    console.log('ended transition', this.transitionCounter, this.isLayoutBusy)\n  }\n\n  getColumns = () => {\n    const count = this.state.columnCount\n    const columns = LIST.reduce((result, item, index) => {\n      result[index % count].push(item)\n      return result\n    }, new Array(count).fill(1).map(x => []))\n    return columns\n  }\n\n  render() {\n    const cols = this.getColumns()\n    return (\n      <div className={classnames(s.container, 'fast-grid')}>\n        {cols.map((col, i) => (\n          <div className=\"grid-column\" key={i}>\n            {col.map((item, j) => (\n              <FastGridItem\n                className={`i-${i + 1} j-${j + 1}`}\n                key={j}\n                image={item.src}\n                onTransitionEnd={this.onTransitionEnd}\n                onTransitionStart={this.onTransitionStart}\n              />\n            ))}\n          </div>\n        ))}\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport classnames from 'classnames'\n\nimport round from 'lodash/round'\n\nimport { Link } from 'react-router-dom'\nimport Logo from 'components/ui/Logo'\n\n// import PhotosGrid from './PhotosGrid'\nimport FastGrid from './FastGrid'\n\nimport s from './PhotosSection.styl'\n\nexport default class LivePhotosSection extends Component {\n  // componentDidMount = () => {\n  //   window.addEventListener('scroll', this._scalePortfolioImage)\n  // }\n\n  // componentWillUnmount = () => {\n  //   window.removeEventListener('scroll', this._scalePortfolioImage)\n  // }\n  scalePortfolioImage = () => {\n    const dw = document.documentElement.clientWidth || window.innerWidth\n    const dh = document.documentElement.clientHeight || window.innerHeight\n    const bounds = this.container.getBoundingClientRect()\n    // const factor = 0.8\n\n    if (dw < 768) {\n      return\n    }\n\n    var perc\n    if (bounds.top >= 0 && bounds.top < dh) {\n      perc = round(bounds.top / dh, 2)\n    } else {\n      perc = 0\n    }\n\n    const images = this.container.querySelectorAll('.photo-inner')\n\n    images.forEach(\n      (image, index) => (image.style.transform = `scale(${1 + perc})`)\n    )\n\n    this.isScaleImageBusy = false\n  }\n\n  render() {\n    const cx = classnames(s.container, 'photos-section', this.props.className)\n    return (\n      <div className={cx} ref={node => (this.container = node)}>\n        <Link to=\"/\" className=\"live-logo-link\">\n          <Logo white className=\"live-logo\" />\n        </Link>\n        <div className=\"horizontal-text\">\n          <div className=\"horizontal-text-inner\">\n            DIGITAL SKETCHBOOK/ LOVE FOR CINEMA/ ORANGE AND TEAL COLOUR THINGY/\n            COLLECTION OF PET PROJECTS/ REJECTS/ DOODLES/ & LOTS OF IDEAS.\n          </div>\n        </div>\n        {/* <div className=\"page-title\">\n            <span className=\"sw-rahul\">RAHUL</span>\n            <span className=\"sw-dot\">.</span>\n            <span className=\"sw-live\">LIVE</span>\n            </div> */}\n\n        <FastGrid />\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\nimport s from './LivePage.styl'\n\nimport PhotosSection from './PhotosSection'\n\nexport default class LivePage extends Component {\n  componentDidMount = () => {\n    window.scrollTo(0, 0, { behaviour: 'smooth' })\n  }\n\n  componentWillUnmount = () => {}\n\n  render() {\n    return (\n      <div className={s.container}>\n        <PhotosSection />\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}